
{
  "entities": {
    "User": {
      "title": "User",
      "type": "object",
      "description": "Represents a user of the FinanceFlow application.",
      "properties": {
        "email": {
          "type": "string",
          "description": "User's email address.",
          "format": "email"
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp indicating when the user account was created.",
          "format": "date-time"
        },
        "currency": {
            "type": "string",
            "description": "The user's preferred currency code (e.g., 'USD', 'EUR')."
        },
        "monzoTokens": {
            "type": "object",
            "description": "Stores Monzo OAuth tokens.",
            "properties": {
                "accessToken": { "type": "string" },
                "refreshToken": { "type": "string" },
                "expiresAt": { "type": "string", "format": "date-time" }
            }
        }
      },
      "required": [
        "email",
        "createdAt"
      ]
    },
    "Income": {
      "title": "Income",
      "type": "object",
      "description": "Represents a single income entry for a user.",
      "properties": {
        "userId": {
          "type": "string",
          "description": "Reference to User. (Relationship: User 1:N Income)"
        },
        "amount": {
          "type": "number",
          "description": "The amount of income received."
        },
        "description": {
          "type": "string",
          "description": "Description of the income source."
        },
        "date": {
          "type": "string",
          "description": "Date when the income was received.",
          "format": "date-time"
        },
        "category": {
          "type": "string",
          "description": "The category of the income."
        }
      },
      "required": [
        "userId",
        "amount",
        "date",
        "category"
      ]
    },
    "Expense": {
      "title": "Expense",
      "type": "object",
      "description": "Represents a single expense entry for a user.",
      "properties": {
        "userId": {
          "type": "string",
          "description": "Reference to User. (Relationship: User 1:N Expense)"
        },
        "amount": {
          "type": "number",
          "description": "The amount of the expense."
        },
        "description": {
          "type": "string",
          "description": "Description of the expense."
        },
        "category": {
          "type": "string",
          "description": "The category of the expense."
        },
        "date": {
          "type": "string",
          "description": "Date when the expense was incurred.",
          "format": "date-time"
        }
      },
      "required": [
        "userId",
        "amount",
        "date"
      ]
    },
    "Category": {
      "title": "Category",
      "type": "object",
      "description": "Represents a user-defined category for transactions.",
      "properties": {
        "userId": {
          "type": "string",
          "description": "The ID of the user who owns this category."
        },
        "name": {
          "type": "string",
          "description": "Name of the category (e.g., 'Food', 'Salary')."
        },
        "icon": {
          "type": "string",
          "description": "The name of the lucide-react icon for the category."
        },
        "type": {
          "type": "string",
          "description": "The type of category.",
          "enum": [
            "income",
            "expense"
          ]
        }
      },
      "required": [
        "userId",
        "name",
        "icon",
        "type"
      ]
    },
    "Budget": {
      "title": "Budget",
      "type": "object",
      "description": "Represents a user's budget for a specific category and time period.",
      "properties": {
        "userId": {
          "type": "string",
          "description": "Reference to User. (Relationship: User 1:N Budget)"
        },
        "amount": {
          "type": "number",
          "description": "The budgeted amount."
        },
        "month": {
          "type": "string",
          "description": "The month for the budget period (YYYY-MM)."
        }
      },
      "required": [
        "userId",
        "amount",
        "month"
      ]
    },
    "Group": {
      "title": "Group",
      "type": "object",
      "description": "Represents a group of users for splitting expenses.",
      "properties": {
        "name": {
          "type": "string",
          "description": "Name of the group."
        },
        "members": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Array of user IDs who are members of this group."
        },
        "memberDetails": {
          "type": "object",
          "additionalProperties": {
            "type": "object",
            "properties": {
              "email": {
                "type": "string"
              },
              "name": {
                "type": "string"
              }
            },
            "required": [
              "email"
            ]
          }
        },
        "createdBy": {
          "type": "string",
          "description": "User ID of the user who created the group."
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "Timestamp of when the group was created."
        }
      },
      "required": [
        "name",
        "members",
        "createdBy",
        "createdAt"
      ]
    },
    "SharedExpense": {
      "title": "Shared Expense",
      "type": "object",
      "description": "Represents an expense shared among users in a group.",
      "properties": {
        "groupId": {
          "type": "string",
          "description": "Reference to the Group this expense belongs to."
        },
        "description": {
          "type": "string",
          "description": "Description of the shared expense."
        },
        "amount": {
          "type": "number",
          "description": "Total amount of the expense."
        },
        "paidBy": {
          "type": "string",
          "description": "User ID of the user who paid for the expense."
        },
        "date": {
          "type": "string",
          "format": "date-time",
          "description": "Date when the expense occurred."
        },
        "splits": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "userId": {
                "type": "string"
              },
              "amount": {
                "type": "number"
              }
            },
            "required": [
              "userId",
              "amount"
            ]
          },
          "description": "Details of how the expense is split among members."
        }
      },
      "required": [
        "groupId",
        "description",
        "amount",
        "paidBy",
        "date",
        "splits"
      ]
    },
    "Debt": {
      "title": "Debt",
      "type": "object",
      "description": "Represents a debt between two users.",
      "properties": {
        "fromUserId": {
          "type": "string",
          "description": "User ID of the user who owes money. Can be virtual."
        },
        "toUserId": {
          "type": "string",
          "description": "User ID of the user who is owed money. Can be virtual."
        },
        "fromUserName": {
            "type": "string",
            "description": "Name of the user who owes money."
        },
        "toUserName": {
            "type": "string",
            "description": "Name of the user who is owed money."
        },
        "amount": {
          "type": "number",
          "description": "The amount of money owed."
        },
        "description": {
          "type": "string",
          "description": "Description of the debt."
        },
        "settled": {
          "type": "boolean",
          "description": "Whether the debt has been settled."
        },
        "createdBy": {
            "type": "string",
            "description": "The real user ID of the user who created the debt record."
        }
      },
      "required": [
        "fromUserId",
        "toUserId",
        "amount",
        "description",
        "createdBy",
        "settled"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous",
      "google.com",
      "github.com"
    ]
  },
  "firestore": {
    "/users/{userId}": {
      "schema": { "$ref": "#/entities/User" },
      "description": "Stores user profile data."
    },
    "/users/{userId}/incomes/{incomeId}": {
        "schema": { "$ref": "#/entities/Income" },
        "description": "Stores income entries for a specific user."
    },
    "/users/{userId}/expenses/{expenseId}": {
        "schema": { "$ref": "#/entities/Expense" },
        "description": "Stores expense entries for a specific user."
    },
    "/users/{userId}/categories/{categoryId}": {
        "schema": { "$ref": "#/entities/Category" },
        "description": "Stores user-specific expense categories."
    },
    "/users/{userId}/budgets/{budgetId}": {
        "schema": { "$ref": "#/entities/Budget" },
        "description": "Stores budget entries for a specific user."
    },
    "/groups/{groupId}": {
        "schema": { "$ref": "#/entities/Group" },
        "description": "Stores group information, including members."
    },
    "/groups/{groupId}/sharedExpenses/{expenseId}": {
        "schema": { "$ref": "#/entities/SharedExpense" },
        "description": "Stores shared expenses for a group."
    },
    "/debts/{debtId}": {
        "schema": { "$ref": "#/entities/Debt" },
        "description": "Stores debt information between two users."
    }
  }
}
